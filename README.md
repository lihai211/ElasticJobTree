# ElasticJobTree
基于当当网的弹性job

###Quartz的缺点

![](https://i.imgur.com/pnpGusk.png)

<pre>
Quartz集群缺陷：
              1）时间规则更改不方便，需同步更改数据库时间规则描述。
              2）Quartz集群当节点不在同一台服务器上，因为时钟的可能不同步导致节点对其他节
                 点状态产生的影响。

           Quartz是Java事实上的任务标准，但Quartz关注点在于定时任务而非数据，并无一套根据
      数据处理而定制化的流程。虽然Quartz可以基于数据库实现作业的高可用，但缺少分布式并行执行
      作业的功能。
</pre>

###ElasticJob

![](https://i.imgur.com/6ambTsF.png)

<pre>
ElasticJob主要功能：

      1）定时任务：
                 基于成熟的定时作业框架Quartz cron表达式执行定时任务。
      2）作业注册中心：
                 基于Zookeeper和其客户端Curator实现的全局作业注册控制中心，用于注册，控制
              ，协调分布式作业执行。
      3）作业分片：
                 将一个任务分片成多个小任务项在服务器上同时执行。
      5）弹性扩容伸缩
                 支持OneOff,Perpetual和SequencePerpetual三种作业模式。
      6）失效转移
                 运行中的作业服务器崩溃不会导致重新分片，只会在下次作业启动时分片，启用失效
            转移功能可以在本次作业过程中，监测其他作业服务器空闲，抓取未完成的孤儿分片项执行。
      7）运行时状态收集：
                 监控作业运行时状态，统计最近一段时间处理的数据成功和失败数量，记录作业上次
            运行开始时间，结束时间和下次运行时间。
      8）作业停止，恢复和禁用
                 用于操作作业启停，并可以禁止某作业运行。
      9）被错过执行的作业重新触发
                 自动记录错过执行的作业，并在上次作业完成后自动触发，
      10）多线程快速处理数据
                 使用多线程处理抓取到的数据，提升吞吐量。
      11）幂等性
                 重复作业任务项判定，不重复执行已运行的作业任务项。由于开启幂等性需要监听作业
             运行状态，对瞬时反复运行的作业队性能有较大影响。
      12）容错处理
                 作业服务器与Zookeeper服务器通信失败则立即停止运行，防止作业注册中心将失效
             的分片项分配给其他作业服务器，而当前作业服务器仍在执行任务，导致重复执行。
      13）Spring支持
      15）提供运维界面，可以管理作业和注册中心
</pre>